@model IEnumerable<PlantHomeViewModel>
@{
	ViewData["Title"] = "Home";
}

<div class="container">
	<div class="site-content-warp">
		<partial name="_SideBarPartial" />
		<div class="page-section">
			<div class="hero-section">
				<div class="hero-scroll">
					<div class="hero-track">
						@foreach (var plant in Model)
						{
							<div class="hs-item set-bg" data-setbg="@plant.ImageUrl">
								<div class="hs-info">
									<h5>@plant.Name</h5>
									<p>@plant.ScientificName</p>
									@if (true)
									{
										<a class="favorite-btn"><img src="~/img/icons/heart-filled.png"></a>
									}
									else
									{
										<a class="favorite-btn"><img src="~/img/icons/heart-outline.png"></a>
									}
								</div>
							</div>
						}
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

@section scripts {
	<script>
		$(document).on('click', '.favorite-btn', function () {
			$(this).toggleClass('clicked');
			var $img = $(this).find('img');
			if ($(this).hasClass('clicked')) {
				$img.attr('src', '/img/icons/heart-filled.png');
			} else {
				$img.attr('src', '/img/icons/heart-outline.png');
			}

			var isLiked = $(this).hasClass('clicked');
			var plantName = $(this).closest('.hs-item').find('h5').text();

			$.ajax({
				url: '@Url.Action("LikeButton", "Home")',
				method: 'POST',
				data: {
					id: 1,
					isLiked: isLiked
				},
				success: function (response) {
					alert(plantName + " added successfully.");
				},
				error: function (request, status, error) {
					alert("Fail");
				}
			});
		});
	</script>
}
